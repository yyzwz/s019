"use strict";(self["webpackChunks019"]=self["webpackChunks019"]||[]).push([[1694],{1694:(s,e,t)=>{t.r(e),t.d(e,{default:()=>c});var a=function(){var s=this,e=s._self._c;return e("div",[e("Card",s._l(s.parkList,(function(t,a){return e("Row",{key:a,attrs:{gutter:50}},s._l(t.parkList,(function(t,a){return e("Col",{key:a,attrs:{span:"4"}},[e("div",[e("Card",{staticClass:"card-main",class:{superCard:t.smokeValue>90||t.forestValue>100}},[e("span",{staticClass:"card-main-title"},[s._v(" "+s._s(t.title)+" ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=t.smokeValue,expression:"item2.smokeValue != undefined"}],staticClass:"card-main-content"},[s._v(" 烟雾："+s._s(t.smokeValue)+" ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:void 0==t.smokeValue,expression:"item2.smokeValue == undefined"}],staticClass:"card-main-content"},[s._v(" 烟雾：未测量 ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=t.forestValue,expression:"item2.forestValue != undefined"}],staticClass:"card-main-content"},[s._v(" 温度："+s._s(t.forestValue)+" ° ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:void 0==t.forestValue,expression:"item2.forestValue == undefined"}],staticClass:"card-main-content"},[s._v(" 温度：未测量 ")]),e("span",{staticClass:"card-main-content"},[s._v(" 报警次数："+s._s(t.alertTimes)+" 次 ")])])],1)])})),1)})),1)],1)},r=[],i=t(4527);const n={name:"single-window",components:{},data(){return{parkList:[]}},methods:{init(){this.getCardListFx(),this.connect()},getCardListFx(){var s=this;s.parkList=[],(0,i.c6)().then((e=>{e.success&&(s.parkList=e.result)}))},connect(){var s=this;console.log("base-ws开始连接..."),this.wsClient=new WebSocket("ws://127.0.0.1:8081/base-ws/"+Math.round(100*Math.random())),this.wsClient.onopen=function(){s.systemInfo+="base-ws已经连接...</br>",console.log("base-ws已经连接...")},this.wsClient.onmessage=function(e){if(s.messageInfo+=e.data+"</br>",console.log("收到 "+e.data),e.data.startsWith("Smoke"))for(var t=e.data.split("@@"),a=0;a<s.parkList.length;a++)for(var r=0;r<s.parkList[a].parkList.length;r++)s.parkList[a].parkList[r].id==t[1]&&(s.parkList[a].parkList[r].smokeValue=parseInt(t[2]),(s.parkList[a].parkList[r].smokeValue>90||s.parkList[a].parkList[r].forestValue>100)&&(s.parkList[a].parkList[r].alertTimes+=1));else if(e.data.startsWith("Temperature"))for(t=e.data.split("@@"),a=0;a<s.parkList.length;a++)for(r=0;r<s.parkList[a].parkList.length;r++)s.parkList[a].parkList[r].id==t[1]&&(s.parkList[a].parkList[r].forestValue=parseInt(t[2]),(s.parkList[a].parkList[r].smokeValue>90||s.parkList[a].parkList[r].forestValue>100)&&(s.parkList[a].parkList[r].alertTimes+=1))},this.wsClient.onclose=function(){s.systemInfo+="base-ws已经断开...</br>",console.log("base-ws已经断开...")},this.wsClient.onerror=function(){s.systemInfo+="base-ws连接失败...</br>",console.log("base-ws连接失败...")}}},mounted(){this.init()}},o=n;var l=t(1001),p=(0,l.Z)(o,a,r,!1,null,"d3a27eb6",null);const c=p.exports},4527:(s,e,t)=>{t.d(e,{Q:()=>r,ZB:()=>i,c6:()=>l,dR:()=>p,i$:()=>o,lY:()=>n});var a=t(7184);const r=s=>(0,a.A_)("/forestPark/getByPage",s),i=s=>(0,a.j0)("/forestPark/insert",s),n=s=>(0,a.j0)("/forestPark/update",s),o=s=>(0,a.j0)("/forestPark/delByIds",s),l=s=>(0,a.A_)("/forestPark/getCardList",s),p=s=>(0,a.A_)("/forestPark/getAntvVoList",s)}}]);